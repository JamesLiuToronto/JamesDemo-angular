<div class="flex flex-col items-center justify-center mt-4" *ngIf="loading$ | async">
    <div style="border-top-color:transparent"
        class="w-12 h-12 border-4 border-blue-600 border-dashed rounded-full animate-spin mt-4"></div>
    <div class="mt-4 text-md font-bold text-green-900">Loading ...</div>

</div>

<div class="mx-auto px-3 py-4 sm:px-3 lg:container" *ngIf="this.isFamilyPage">
    <div class="flex rounded-lg bg-white px-4 py-4 space-x-6 dark:bg-night-700 sm:flex-row">
        <div class="mb-4 mx-10 flex items-center justify-between">
            <select id="countries"
                class="bg-gray-50 border border-gray-300 text-gray-900 text-xs rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-1.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
                <option selected>Choose a User Account</option>
                <option *ngFor="let user of users ;let indexOfelement=index;"
                            class="border-b border-dashed border-gray-200 dark:border-night-500 hover:bg-slate-200"
                            value={{user.userId}}>
                       {{user.emailAddress}} - {{user.firstName }}, {{user.lastName}}
                </option>                            

            </select>
        </div>
        <div class="mb-4 flex items-center justify-between">
            <button (click)="this.getUserList()"
                    class="flex-none rounded-md bg-primary-500 px-4 py-2.5 text-xs font-semibold hover:bg-primary-200 dark:bg-night-600 dark:text-night-200 dark:hover:bg-night-500">
                    Refresh
                </button>
        </div>


    </div>



</div>


<div class="mx-auto px-3 py-4 sm:px-3 lg:container" *ngIf="!this.isFamilyPage">

    <!-- Auctions Table -->
    <div class="sm:col-span-1 md:col-span-2 xl:col-span-3">

        <div class="flex-col rounded-lg bg-white px-8 py-8 dark:bg-night-700 sm:flex-row">
            <div class="mb-4 flex items-center justify-between">
                <div class="flex-col items-center">
                    
                    <span class="text-xs text-gray-400 dark:text-night-300">Last Retrieve Time:
                        {{lastRetrieveTime}}</span>
                </div>
                <button (click)="this.getUserList()"
                    class="flex-none rounded-md bg-primary-500 px-4 py-2.5 text-xs font-semibold hover:bg-primary-200 dark:bg-night-600 dark:text-night-200 dark:hover:bg-night-500">
                    Refresh
                </button>
            </div>

            <div class="users_divider_class">
                <p class="users_divider_title">Registered Users</p>
            </div>

            <ul *ngIf="pager && pager.pages?.length" class="pagination justify-content-center">
                <li [ngClass]="{ disabled: pager.currentPage === 1 }" class="page-item">
                    <a (click)="setPage(1)" class="page-link">First</a>
                </li>
                <li [ngClass]="{ disabled: pager.currentPage === 1 }" class="page-item">
                    <a (click)="setPage(pager.currentPage - 1)" class="page-link">Previous</a>
                </li>
                <li *ngFor="let page of pager.pages" [ngClass]="{ active: pager.currentPage === page }" class="page-item">
                    <a (click)="setPage(page)" class="page-link">{{page}}</a>
                </li>
                <li [ngClass]="{ disabled: pager.currentPage === pager.totalPages }" class="page-item">
                    <a (click)="setPage(pager.currentPage + 1)" class="page-link">Next</a>
                </li>
                <li [ngClass]="{ disabled: pager.currentPage === pager.totalPages }" class="page-item">
                    <a (click)="setPage(pager.totalPages)" class="page-link">Last</a>
                </li>
            </ul>

            <div class="overflow-x-auto">
                <table class="w-full table-auto">
                    <!--Table head-->
                    <thead class="text-xs uppercase text-gray-400 dark:text-night-100">
                        <tr>
                            <th class="py-3 text-left"><a (click)="sortBy('emailAddress')"> Email {{sortIcon('emailAddress')}}</a></th>
                            <th class="py-3 text-left"><a (click)="sortBy('userStatus')">Status {{sortIcon('userStatus')}}</a></th>
                            <th class="py-3 text-left"><a (click)="sortBy('firstName')">First Name {{sortIcon('firstName')}} </a></th>
                            <th class="py-3 text-left"><a (click)="sortBy('lastName')">Last Name {{sortIcon('lastName')}} </a></th>
                            <th class="py-3 text-right">View</th>

                        </tr>
                    </thead>
                    <!--end Table head-->
                    <!--Table body-->
                    <tbody>
                        <tr *ngFor="let user of users ;let indexOfelement=index;"
                            class="border-b border-dashed border-gray-200 dark:border-night-500 hover:bg-slate-200">

                            <td
                                class="px-1 py-2 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-night-100">
                                {{
                                user.emailAddress }} </td>
                            <td
                                class="text-sm text-gray-900 font-light p2-6 py-1 whitespace-nowrap dark:text-night-100">
                                {{
                                user.userStatus }} </td>
                            <td
                                class="text-sm text-gray-900 font-light p2-6 py-1 whitespace-nowrap dark:text-night-100">
                                {{
                                user.firstName }}</td>
                            <td
                                class="text-sm text-gray-900 font-light p2-6 py-1 whitespace-nowrap dark:text-night-100">
                                {{
                                user.lastName}} </td>
                            <td class="py-2 pl-2 text-right">
                                <div class="flex justify-end">
                                    <button (click)="this.viewUser(indexOfelement)" href="#"
                                        class="flex h-7 w-7 items-center justify-center rounded-md bg-gray-200 text-gray-400 dark:bg-night-500 dark:text-night-300">
                                        <svg-icon src="assets/icons/outline/arrow-sm-right.svg" [svgClass]="'h-5 w-5'">
                                        </svg-icon>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                    <!--end::Table body-->
                </table>
            </div>
        </div>
    </div>
    <app-popup-window></app-popup-window>