<div class="flex flex-col items-center justify-center mt-4" *ngIf="loading$ | async">
    <div style="border-top-color:transparent"
        class="w-12 h-12 border-4 border-blue-600 border-dashed rounded-full animate-spin mt-4"></div>
    <div class="mt-4 text-md font-bold text-green-900">Loading ...</div>

</div>


<div class="mx-auto px-3 py-4 sm:px-3 lg:container">

    <!-- Auctions Table -->
    <div class="sm:col-span-1 md:col-span-2 xl:col-span-3">

        <div class="flex-col rounded-lg bg-white px-8 py-8 dark:bg-night-700 sm:flex-row">
            <div class="mb-4 flex items-center justify-between">
                <div class="flex-col items-center">

                    <span class="text-xs text-gray-400 dark:text-night-300">Last Retrieve Time:
                        {{lastRetrieveTime}}</span>
                </div>
                <button (click)="this.getUserList()"
                    class="flex-none rounded-md bg-primary-500 px-4 py-2.5 text-xs font-semibold hover:bg-primary-200 dark:bg-night-600 dark:text-night-200 dark:hover:bg-night-500">
                    Refresh
                </button>
            </div>
            <div class="card-footer" *ngIf="this.isAdmin()">
                <app-pagination></app-pagination>
            </div>

            <div class="users_divider_class">
                <p class="users_divider_title">Registered Users</p>
            </div>

            <div class="overflow-x-auto">
                <table class="w-full table-auto">
                    <!--Table head-->
                    <thead class="text-xs uppercase text-gray-400 dark:text-night-100">
                        <tr>
                            <th class="py-3 text-left"><a (click)="sortBy('emailAddress')"> Email
                                    {{sortIcon('emailAddress')}}</a></th>
                            <th class="py-3 text-left"><a (click)="sortBy('userStatus')">Status
                                    {{sortIcon('userStatus')}}</a></th>
                            <th class="py-3 text-left"><a (click)="sortBy('firstName')">First Name
                                    {{sortIcon('firstName')}} </a></th>
                            <th class="py-3 text-left"><a (click)="sortBy('lastName')">Last Name
                                    {{sortIcon('lastName')}} </a></th>
                            <th class="py-3 text-right">View</th>

                        </tr>
                    </thead>
                    <!--end Table head-->
                    <!--Table body-->
                    <tbody>
                        <tr *ngFor="let user of users ;let indexOfelement=index;"
                            class="border-b border-dashed border-gray-200 dark:border-night-500 hover:bg-slate-200">

                            <td
                                class="px-1 py-2 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-night-100">
                                {{
                                user.emailAddress }} </td>
                            <td
                                class="text-sm text-gray-900 font-light p2-6 py-1 whitespace-nowrap dark:text-night-100">
                                {{
                                user.userStatus }} </td>
                            <td
                                class="text-sm text-gray-900 font-light p2-6 py-1 whitespace-nowrap dark:text-night-100">
                                {{
                                user.firstName }}</td>
                            <td
                                class="text-sm text-gray-900 font-light p2-6 py-1 whitespace-nowrap dark:text-night-100">
                                {{
                                user.lastName}} </td>
                            <td class="py-2 pl-2 text-right">
                                <div class="flex justify-end">
                                    <button (click)="this.viewUser(indexOfelement)" href="#"
                                        class="flex h-7 w-7 items-center justify-center rounded-md bg-gray-200 text-gray-400 dark:bg-night-500 dark:text-night-300">
                                        <svg-icon src="assets/icons/outline/arrow-sm-right.svg" [svgClass]="'h-5 w-5'">
                                        </svg-icon>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                    <!--end::Table body-->
                </table>
                <div class="flex items-center my-2">
                    <div class="text-xs font-semibold mr-1">Items Per Page:</div>
                    <div>
                        <select (change)="onChangePageSize($event)"
                            class="bg-gray-50 border border-gray-300 text-gray-900 text-xs rounded-lg 
                                focus:ring-blue-500 focus:border-blue-500 block w-full py-0 px-5 dark:bg-gray-700 
                                dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">
                            <option *ngFor="let size of pageSizes" [ngValue]="size"
                                class="border-b border-dashed border-gray-200 dark:border-night-500 hover:bg-slate-200">
                                {{ size }}
                            </option>
                        </select>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <app-popup-window></app-popup-window>